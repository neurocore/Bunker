{"version":3,"file":"js/app.b4753d08.js","mappings":"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","sources":["webpack://bunker/./src/components/screens/home.vue","webpack://bunker/./src/state.js","webpack://bunker/./src/components/screens/home.vue?1052","webpack://bunker/./src/components/screens/lobby.vue","webpack://bunker/./src/components/elements/enter_name.vue","webpack://bunker/./src/components/elements/enter_name.vue?e2d8","webpack://bunker/./src/components/screens/lobby.vue?e271","webpack://bunker/./src/components/screens/game.vue","webpack://bunker/./src/components/elements/card.vue","webpack://bunker/./src/components/elements/card.vue?e4c1","webpack://bunker/./src/components/screens/game.vue?62ec","webpack://bunker/./src/components/screens/404.vue","webpack://bunker/./src/components/screens/404.vue?b34d","webpack://bunker/./src/App.vue","webpack://bunker/./src/App.vue?7ccd","webpack://bunker/./src/main.js","webpack://bunker/webpack/bootstrap","webpack://bunker/webpack/runtime/chunk loaded","webpack://bunker/webpack/runtime/compat get default export","webpack://bunker/webpack/runtime/define property getters","webpack://bunker/webpack/runtime/global","webpack://bunker/webpack/runtime/hasOwnProperty shorthand","webpack://bunker/webpack/runtime/jsonp chunk loading","webpack://bunker/webpack/startup"],"sourcesContent":["<template>\r\n  <div class=\"screen screen-main\">\r\n    <div class=\"caption big\">Bunker</div>\r\n    <div class=\"settings\">\r\n      <div class=\"caption\">Настройки</div>\r\n\r\n    </div>\r\n    <div @click=\"create_host\" class=\"btn create_host\">Создать хост</div>\r\n    <br />\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { state } from '../../state.js';\r\n  import { nanoid } from 'nanoid';\r\n\r\n  export default {\r\n    name: 'App',\r\n    methods:\r\n    {\r\n      create_host() {\r\n        const game_id = nanoid(12);\r\n        state.set_cid(game_id); // host\r\n        this.$router.push(`/lobby/${game_id}`);\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .screen-main {\r\n    padding-top: 50px;\r\n  }\r\n</style>\r\n","import { nanoid } from 'nanoid';\r\nimport { reactive } from 'vue';\r\nimport * as Ably from 'ably';\r\n\r\nexport const state = reactive(\r\n{\r\n  phase: 'home',\r\n  name: '',\r\n  game_id: null,\r\n  client_id: null,\r\n  channel: null,\r\n  players: {},\r\n  deck: [],\r\n\r\n  is_host()\r\n  {\r\n    return this.client_id == this.game_id;\r\n  },\r\n\r\n  is_player()\r\n  {\r\n    console.log('this.game_id', this.game_id, typeof(this.game_id));\r\n    return this.game_id && this.game_id != '';\r\n  },\r\n\r\n  set_cid(val)\r\n  {\r\n    this.client_id = val;\r\n  },\r\n\r\n  set_name(name)\r\n  {\r\n    this.name = name;\r\n\r\n    if (this.channel)\r\n      this.channel.presence.updateClient(this.client_id, {name});\r\n  },\r\n\r\n  connect(game_id)\r\n  {\r\n    const key = process.env.VUE_APP_API_KEY;\r\n    const pre = process.env.VUE_APP_PRE;\r\n    this.game_id = game_id;\r\n\r\n    if (!this.client_id)\r\n    {\r\n      this.client_id = sessionStorage.getItem(`${pre}_cid`)\r\n                    || nanoid(16);\r\n    }\r\n    sessionStorage.setItem(`${pre}_cid`, this.client_id);\r\n\r\n    if (this.channel || !this.game_id) return false;\r\n\r\n    const ch_name = `cbl_bunker_${this.game_id}`;\r\n    const realtime = new Ably.Realtime({ key });\r\n    this.channel = realtime.channels.get(ch_name);\r\n    const presence = this.channel.presence;\r\n\r\n    if (this.is_host()) // Host\r\n    {\r\n      presence.subscribe(e =>\r\n      {\r\n        console.log(`Client ${e.clientId} is ${e.action}`);\r\n\r\n        if (e.action == 'present'\r\n        ||  e.action == 'enter'\r\n        ||  e.action == 'update')\r\n        {\r\n          console.log(e.data);\r\n          if ('name' in e.data)\r\n            this.players[e.clientId] = { name: e.data.name };\r\n          this.update_presence();\r\n        }\r\n\r\n        if (e.action == 'leave')\r\n        {\r\n          if (e.clientId in this.players)\r\n          {\r\n            delete this.players[e.clientId];\r\n            this.update_presence();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    this.channel.subscribe(e =>\r\n    {\r\n      console.log(`Action ${e.name} with`, e.data);\r\n      switch(e.name)\r\n      {\r\n        case 'players':\r\n        {\r\n          if (!this.is_host())\r\n            this.players = e.data;\r\n          break;\r\n        }\r\n\r\n        case 'start_game':\r\n        {\r\n          this.phase = 'game';\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    return true;\r\n  },\r\n\r\n  disconnect()\r\n  {\r\n    this.channel.detach();\r\n  },\r\n\r\n  update_presence()\r\n  {\r\n    this.channel.publish('players', this.players);\r\n  },\r\n\r\n  start_game()\r\n  {\r\n    this.channel.publish('start_game', {});\r\n  },\r\n});\r\n","import { render } from \"./home.vue?vue&type=template&id=b664d740&scoped=true\"\nimport script from \"./home.vue?vue&type=script&lang=js\"\nexport * from \"./home.vue?vue&type=script&lang=js\"\n\nimport \"./home.vue?vue&type=style&index=0&id=b664d740&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b664d740\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"screen screen-main\">\r\n    <div class=\"caption big\">Bunker</div>\r\n    \r\n    <div class=\"block\">\r\n      <div>Lobby for game with id = {{ game_id }}</div>\r\n      <div>I am a client with id = {{ state.client_id }}</div>\r\n    </div>\r\n\r\n    <div class=\"block\">\r\n      <enter-name @changed-name=\"change_name\"\r\n                  :value=\"state.name\"></enter-name>\r\n    </div>\r\n\r\n    <div class=\"block\">\r\n      <div>Players count {{ players_count }}</div>\r\n      <ul>\r\n        <li v-for=\"player in state.players\"\r\n           :key=\"player.clientId\">{{ player.name }}</li>\r\n      </ul>\r\n    </div>\r\n\r\n    <div class=\"block\" v-if=\"state.is_host()\">\r\n      <div @click=\"start_game\" class=\"btn\">Начать игру</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { state } from '../../state.js';\r\n  import EnterName from '../elements/enter_name.vue';\r\n  import { debounce } from 'debounce';\r\n\r\n  export default {\r\n    name: 'Lobby',\r\n    props: ['game_id'],\r\n    components: {\r\n      EnterName\r\n    },\r\n    \r\n    data() {\r\n      return {\r\n        state\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      'state.phase'(newValue, oldValue) {\r\n        console.log(`Phase: ${oldValue} -> ${newValue}`)\r\n        if (newValue == 'game')\r\n          this.$router.push(`/game`);\r\n      }\r\n    },\r\n\r\n    mounted: function() {\r\n      this.state.connect(this.game_id);\r\n    },\r\n\r\n    unmounted: function() {\r\n      this.state.disconnect();\r\n    },\r\n\r\n    methods: {\r\n      start_game() {\r\n        this.state.start_game();\r\n      }\r\n    },\r\n\r\n    created()\r\n    {\r\n      // to not make conflicts with\r\n      // other debounce instances\r\n      this.change_name = debounce(name => {\r\n        console.log('name', name);\r\n        this.state.set_name(name);\r\n      }, 500);\r\n    },\r\n\r\n    computed:\r\n    {\r\n      players_count()\r\n      {\r\n        return !state.players ? 0\r\n             : Object.keys(state.players).length;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n","<template>\r\n  <label>\r\n    <span>Введите имя: </span>\r\n    <input type=\"text\" v-model.trim=\"name\">\r\n  </label>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'EnterName',\r\n    props: ['value'],\r\n    data() {\r\n      const pre = process.env.VUE_APP_PRE;\r\n      const name = process.env.NODE_ENV == 'development'\r\n                 ? sessionStorage.getItem(`${pre}_name`)\r\n                 : localStorage.getItem(`${pre}_name`);\r\n      return {\r\n        name: name || ''\r\n      }\r\n    },\r\n    watch: {\r\n      name: {\r\n        immediate: true,\r\n        handler(val)\r\n        {\r\n          const pre = process.env.VUE_APP_PRE;\r\n          if (process.env.NODE_ENV == 'development')\r\n            sessionStorage.setItem(`${pre}_name`, val);\r\n          else\r\n            localStorage.setItem(`${pre}_name`, val);\r\n\r\n          console.log('changed-name', val);\r\n          this.$emit('changed-name', val);\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n","import { render } from \"./enter_name.vue?vue&type=template&id=47595cbb\"\nimport script from \"./enter_name.vue?vue&type=script&lang=js\"\nexport * from \"./enter_name.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./lobby.vue?vue&type=template&id=2b365f2c\"\nimport script from \"./lobby.vue?vue&type=script&lang=js\"\nexport * from \"./lobby.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"state.is_player()\" class=\"screen\">\r\n    <div class=\"block\">\r\n      <div class=\"title\">{{ state.name }}</div>\r\n    </div>\r\n    <div class=\"block\">\r\n      <div>Game with id = \"{{ state.game_id }}\"</div>\r\n    </div>\r\n    \r\n    <div class=\"container\">\r\n      <Card code=\"code\" type=\"none\">Просто</Card>\r\n      <Card code=\"code\" type=\"type\">Я карта</Card>\r\n      <Card code=\"code\" type=\"type\">Я карта</Card>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"screen\">\r\n    Комната не найдена\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { state } from '../../state.js';\r\n  import Card from '../elements/card.vue';\r\n\r\n  export default {\r\n    name: 'Game',\r\n    components: {\r\n      Card\r\n    },\r\n    props: ['game_id'],\r\n\r\n    data() {\r\n      return {\r\n        state\r\n      }\r\n    },\r\n  }\r\n</script>\r\n","<template>\r\n  <div :class=\"['card', type]\"\r\n       data-code=\"{{ code }}\">\r\n    <div class=\"title\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'card',\r\n    props: {\r\n      type: String,\r\n      code: String,\r\n    },\r\n    computed: {\r\n      img() {\r\n        return this.image || this.code + '.jpg';\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .card {\r\n    padding: 20px 30px;\r\n    background: #f6c687;\r\n    width: 150px;\r\n    height: 250px;\r\n    border-radius: 10px;\r\n    box-shadow: 3px 3px 8px rgba(0,0,0,.1);\r\n    border: 1px solid rgba(0,0,0,.2);\r\n    margin-right: 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .card.type {\r\n    background: lightblue;\r\n  }\r\n</style>\r\n","import { render } from \"./card.vue?vue&type=template&id=0c90f360&scoped=true\"\nimport script from \"./card.vue?vue&type=script&lang=js\"\nexport * from \"./card.vue?vue&type=script&lang=js\"\n\nimport \"./card.vue?vue&type=style&index=0&id=0c90f360&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c90f360\"]])\n\nexport default __exports__","import { render } from \"./game.vue?vue&type=template&id=0d703b68\"\nimport script from \"./game.vue?vue&type=script&lang=js\"\nexport * from \"./game.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div>Page not found</div>\r\n</template>\r\n","import { render } from \"./404.vue?vue&type=template&id=4304889e\"\nconst script = {}\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <router-view />\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'App',\r\n    components: {\r\n    },\r\n  }\r\n</script>\r\n\r\n<style>\r\n  * {\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  html, body {\r\n    padding: 0;\r\n    margin: 0;\r\n    height: 100%;\r\n    background: aliceblue;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  body {\r\n    height: 100%;\r\n  }\r\n\r\n  #app {\r\n    font-family: Avenir, Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    text-align: center;\r\n    color: #333;\r\n    font-size: 18px;\r\n    flex: 1 0;\r\n  }\r\n\r\n  .screen {\r\n    padding: 10px 10px;\r\n    padding-top: 50px;\r\n  }\r\n\r\n  .block {\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .container {\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .caption {\r\n    font-size: 25px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .caption.big {\r\n    font-size: 30px;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .btn {\r\n    background: #eee;\r\n    border-radius: 5px;\r\n    border: 1px solid rgba(0,0,0,.1);\r\n    display: inline-block;\r\n    padding: 0 12px;\r\n    height: 35px;\r\n    line-height: 32px;\r\n    font-size: 16px;\r\n    margin-bottom: 10px;\r\n    cursor: pointer;\r\n    box-shadow: 2px 2px 6px rgba(0,0,0,.1);\r\n    -webkit-touch-callout: none;\r\n      -webkit-user-select: none;\r\n       -khtml-user-select: none;\r\n         -moz-user-select: none;\r\n          -ms-user-select: none;\r\n              user-select: none;  \r\n  }\r\n\r\n  .btn:active {\r\n    box-shadow: 2px 2px 6px rgba(0,0,0,.1) inset;\r\n  }\r\n\r\n  .btn-okay {\r\n    background: #e1f8ff;\r\n  }\r\n\r\n  input {\r\n    display: inline-block;\r\n    padding: 0 12px;\r\n    font-size: 16px;\r\n    line-height: 16px;\r\n    height: 35px;\r\n    border-radius: 5px;\r\n    border: 1px solid rgba(0,0,0,.2);\r\n    box-shadow: 2px 2px 6px rgba(0,0,0,.15) inset;\r\n  }\r\n\r\n  input:focus {\r\n    outline: none;\r\n    border-color: rgba(0,0,0,.4);\r\n  }\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=7fafcd06\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7fafcd06&lang=css\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\bunker\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\r\nimport { createRouter, createWebHistory } from 'vue-router';\r\nimport Home from './components/screens/home.vue';\r\nimport Lobby from './components/screens/lobby.vue';\r\nimport Game from './components/screens/game.vue';\r\nimport NotFound from './components/screens/404.vue';\r\nimport App from './App.vue';\r\n\r\nconst router = createRouter(\r\n{\r\n  history: createWebHistory(),\r\n  routes:\r\n  [\r\n    { path: '/', component: Home },\r\n    { path: '/lobby/:game_id', component: Lobby, props: true },\r\n    { path: '/game/', component: Game },\r\n    { path: '/:pathMatch(.*)*', component: NotFound },\r\n  ],\r\n});\r\n\r\nconst app = createApp(App);\r\napp.use(router);\r\n\r\napp.mount('#app');\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbunker\"] = self[\"webpackChunkbunker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(581); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","$options","_hoisted_4","_renderSlot","_ctx","state","reactive","phase","name","game_id","client_id","channel","players","deck","is_host","this","is_player","console","log","set_cid","val","set_name","presence","updateClient","connect","key","process","pre","sessionStorage","getItem","nanoid","setItem","ch_name","realtime","Ably","channels","get","subscribe","e","clientId","action","data","update_presence","disconnect","detach","publish","start_game","methods","create_host","$router","push","__exports__","render","$props","$data","_createVNode","_component_enter_name","onChangedName","value","_hoisted_5","_Fragment","player","_hoisted_6","type","props","localStorage","watch","immediate","handler","$emit","components","EnterName","newValue","oldValue","mounted","unmounted","created","change_name","debounce","computed","players_count","Object","keys","length","_component_Card","code","String","img","image","Card","script","_createBlock","_component_router_view","router","createRouter","history","createWebHistory","routes","path","component","Home","Lobby","Game","NotFound","app","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}